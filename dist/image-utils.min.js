!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.ImageUtils=r():e.ImageUtils=r()}(this,function(){return function(e){function r(o){if(t[o])return t[o].exports;var n=t[o]={exports:{},id:o,loaded:!1};return e[o].call(n.exports,n,n.exports,r),n.loaded=!0,n.exports}var t={};return r.m=e,r.c=t,r.p="",r(0)}([function(e,r,t){"use strict";r.readFile=t(1),r.dataURIToBlob=t(2),r.compress=t(3)},function(e,r){"use strict";e.exports=function(e,r){if(!e)throw new Error("`file` is required.");if("function"!=typeof r)throw new Error("`callback` is required.");if(!window.FileReader){var t=new Error("Your browser doesn't support `FileReader`.");return r(t)}var o=new FileReader;o.onload=function(){var e=this.result;r(null,e)},o.onerror=function(){var e=this.error,t=void 0;switch(e.code){case e.NOT_FOUND_ERR:t="File Not Found!";break;case e.NOT_READABLE_ERR:t="File is not readable!";break;case e.ABORT_ERR:t="File read cancelled.";break;default:t="An error occurred reading this file."}r(new Error(t))},o.readAsDataURL(e)}},function(e,r){"use strict";e.exports=function(e){if(!window.Blob)throw new Error("Your browser doesn't support Blob");for(var r=e.match(/data:([^;]+)/)[1],t=e.replace(/^[^,]+,/,""),o=atob(t),n=new Uint8Array(o.length),a=0;a<o.length;a++)n[a]=o.charCodeAt(a);return new Blob([n],{type:r})}},function(e,r,t){"use strict";function o(e,r){var t=r.quality,o=r.format,n=r.blob,a=document.createElement("canvas"),i=void 0,u=void 0,l=void 0;return l="png"===o?"image/png":"image/jpeg",a.width=e.naturalWidth,a.height=e.naturalHeight,i=a.getContext("2d"),i.drawImage(e,0,0),u=a.toDataURL(l,t),n?c(u):u}function n(e){return e&&e.nodeName&&"img"===e.nodeName.toLowerCase()}function a(e){return e.type?e.type.split("/")[1]:null}var i=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},u=t(1),c=t(2);e.exports=function(e,r,t){var c={quality:.8,format:"jpeg",blob:!1},l=void 0,s=e,d=void 0;if("function"!=typeof t)throw new Error("`callback` is required.");return l="number"==typeof r?i({},c,{quality:r}):i({},c,r),n(s)?(d=o(s,l),t(null,d)):void(n(s)||(l.format=r.format||a(s)||l.format,u(s,function(e,r){if(e)return t(e);var n=new Image;n.onload=function(){return t(null,o(n,l))},n.src=r})))}}])});